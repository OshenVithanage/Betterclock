<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BetterClock â€“ Timers</title>
    <style>
        :root {
            --bg: #0b0b0c;
            --panel: #141416;
            --muted: #8b8d92;
            --text: #e9eaed;
            --primary: #F4BC0F;
            --primary-weak: #F4BC0F1a;
            --ring-bg: #2a2c30;
        }
        html, body {
            height: 100%;
        }
        body {
            margin: 0;
            background: var(--bg);
            color: var(--text);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }
        .app {
            width: min(920px, 92vw);
            padding: 0 32px 32px 32px;
        }
        .tabs {
            display: flex;
            background: var(--panel);
            border-radius: 50px;
            padding: 4px;
            gap: 0;
            justify-content: center;
            margin-bottom: 24px;
            margin-top: 2;
            position: relative;
            max-width: 120px; /* Start compact - only icons */
            margin-left: auto;
            margin-right: auto;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden; /* Keep indicator contained */
        }
        .tabs:hover {
            max-width: 280px; /* Expand to show text */
        }
        .tabs.expanded {
            max-width: 280px; /* Keep expanded after hover */
        }
        .tab {
            padding: 12px 16px;
            border-radius: 46px;
            background: transparent;
            color: var(--muted);
            font-weight: 600;
            user-select: none;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 2;
            flex: 1;
            text-align: center;
            border: none;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            white-space: nowrap;
            overflow: hidden;
            min-width: 48px; /* Minimum size for icon */
        }
        .tab.active { 
            color: var(--text);
        }
        .tab svg {
            width: 16px;
            height: 16px;
            fill: currentColor;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            flex-shrink: 0;
        }
        .tab-text {
            opacity: 0;
            transform: translateX(-10px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            width: 0;
            overflow: hidden;
        }
        .tabs:hover .tab-text,
        .tabs.expanded .tab-text {
            opacity: 1;
            transform: translateX(0);
            width: auto;
        }
        .tab-indicator {
            position: absolute;
            top: 4px;
            left: 4px;
            height: calc(100% - 8px);
            background: var(--primary);
            border-radius: 46px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1;
            box-shadow: 0 2px 8px rgba(244, 188, 15, 0.3);
            will-change: width, transform;
        }
        .timer-card {
            background: transparent;
            border-radius: 20px;
            padding: 28px;
            display: grid;
            place-items: center;
            box-shadow: none;
            min-height: 200px;
        }
    </style>
</head>
<body>
    <div class="app">
        <div class="tabs" id="tabsContainer">
            <div class="tab-indicator" id="tabIndicator"></div>
            <button class="tab" data-tab="breaks">
                <svg viewBox="0 0 24 24">
                    <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 7.5C14.8 6.6 14.3 5.8 13.5 5.3L16.8 2L15.4 0.6L12 4L8.6 0.6L7.2 2L10.5 5.3C9.7 5.8 9.2 6.6 9 7.5L3 7V9L9 8.5V10.5C9 11.3 9.7 12 10.5 12H13.5C14.3 12 15 11.3 15 10.5V8.5L21 9ZM6 13C4.9 13 4 13.9 4 15S4.9 17 6 17 8 16.1 8 15 7.1 13 6 13ZM6 19C4.9 19 4 19.9 4 21S4.9 23 6 23 8 22.1 8 21 7.1 19 6 19ZM18 13C16.9 13 16 13.9 16 15S16.9 17 18 17 20 16.1 20 15 19.1 13 18 13ZM18 19C16.9 19 16 19.9 16 21S16.9 23 18 23 20 22.1 20 21 19.1 19 18 19Z"/>
                </svg>
                <span class="tab-text">Breaks</span>
            </button>
            <button class="tab active" data-tab="tasks">
                <svg viewBox="0 0 24 24">
                    <path d="M19,3H14.82C14.4,1.84 13.3,1 12,1C10.7,1 9.6,1.84 9.18,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M12,3A1,1 0 0,1 13,4A1,1 0 0,1 12,5A1,1 0 0,1 11,4A1,1 0 0,1 12,3M7,7H17V9H7V7M7,11H17V13H7V11M7,15H13V17H7V15Z"/>
                </svg>
                <span class="tab-text">Tasks</span>
            </button>
        </div>
        <div class="timer-card">
            <!-- Clean interface - content will be added here -->
        </div>
    </div>
    <script>
        // Tab switching with sliding indicator and hover animation
        const tabs = document.querySelectorAll('.tab');
        const tabIndicator = document.getElementById('tabIndicator');
        const tabsContainer = document.getElementById('tabsContainer');
        let hideTimeout = null;
        
        function updateTabIndicator() {
            const activeTab = document.querySelector('.tab.active');
            if (activeTab && tabIndicator) {
                // Get current dimensions
                const tabsRect = tabsContainer.getBoundingClientRect();
                const activeTabRect = activeTab.getBoundingClientRect();
                
                // Calculate relative position within container
                const containerWidth = tabsRect.width;
                const tabWidth = activeTabRect.width;
                const tabLeft = activeTabRect.left - tabsRect.left;
                
                // Ensure indicator stays within bounds
                const maxLeft = containerWidth - tabWidth - 8; // Account for padding
                const constrainedLeft = Math.max(4, Math.min(tabLeft, maxLeft));
                const constrainedWidth = Math.min(tabWidth, containerWidth - 8);
                
                tabIndicator.style.width = `${constrainedWidth}px`;
                tabIndicator.style.transform = `translateX(${constrainedLeft}px)`;
            }
        }
        
        // Animation frame loop for smooth indicator updates
        let isAnimating = false;
        function startIndicatorAnimation() {
            if (isAnimating) return;
            isAnimating = true;
            
            function animateIndicator() {
                updateTabIndicator();
                if (isAnimating) {
                    requestAnimationFrame(animateIndicator);
                }
            }
            requestAnimationFrame(animateIndicator);
        }
        
        function stopIndicatorAnimation() {
            isAnimating = false;
        }
        
        // Handle hover animations with delay
        tabsContainer.addEventListener('mouseenter', () => {
            // Clear any pending hide timeout
            if (hideTimeout) {
                clearTimeout(hideTimeout);
                hideTimeout = null;
            }
            // Start smooth animation loop
            startIndicatorAnimation();
            // Stop after transition completes
            setTimeout(() => stopIndicatorAnimation(), 500);
        });
        
        tabsContainer.addEventListener('mouseleave', () => {
            // Start 2-second countdown to hide text
            hideTimeout = setTimeout(() => {
                tabsContainer.classList.remove('expanded');
                // Start animation for collapse
                startIndicatorAnimation();
                setTimeout(() => stopIndicatorAnimation(), 500);
            }, 2000); // 2 seconds
            
            // Keep expanded for the countdown period
            tabsContainer.classList.add('expanded');
        });
        
        // Listen for CSS transitions to update indicator
        tabsContainer.addEventListener('transitionend', (e) => {
            if (e.target === tabsContainer && e.propertyName === 'max-width') {
                // Final adjustment after transition completes
                updateTabIndicator();
            }
        });
        
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // Remove active class from all tabs
                tabs.forEach(t => t.classList.remove('active'));
                // Add active class to clicked tab
                tab.classList.add('active');
                
                // Start smooth animation for tab switch
                startIndicatorAnimation();
                setTimeout(() => stopIndicatorAnimation(), 500);
                
                // Keep expanded after clicking
                tabsContainer.classList.add('expanded');
                
                // Reset the hide timeout
                if (hideTimeout) {
                    clearTimeout(hideTimeout);
                }
                hideTimeout = setTimeout(() => {
                    tabsContainer.classList.remove('expanded');
                    // Start animation for collapse
                    startIndicatorAnimation();
                    setTimeout(() => stopIndicatorAnimation(), 500);
                }, 2000);
                
                // Here you can add logic to switch between different views
                const tabType = tab.getAttribute('data-tab');
                console.log('Switched to:', tabType);
            });
        });
        
        // Initialize indicator position
        setTimeout(updateTabIndicator, 100);
        window.addEventListener('resize', updateTabIndicator);
    </script>
</body>
</html>